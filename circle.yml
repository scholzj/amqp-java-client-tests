machine:
  hosts:
    amqp-host: 127.0.0.1
  java:
    version: oraclejdk8
  services:
    - docker
  environment:
    #- MAVEN_TEST_SUITE=no-tests.xml BROKER_DOCKER_IMAGE=scholzj/java-client-tests:0.34
    MAVEN_TEST_SUITE: qpid-0.34.xml
    BROKER_DOCKER_IMAGE: scholzj/java-client-tests:0.34
    #- MAVEN_TEST_SUITE=qpid-0.36.xml BROKER_DOCKER_IMAGE=scholzj/java-client-tests:0.36
    #- MAVEN_TEST_SUITE=mrg-3.0.0.xml BROKER_DOCKER_IMAGE=scholzj/java-client-tests:3.0.0
    #- MAVEN_TEST_SUITE=mrg-3.2.0.xml BROKER_DOCKER_IMAGE=scholzj/java-client-tests:3.2.0

test:
  pre:
    - docker run -d -p 35672:5672 -p 35671:5671 $BROKER_DOCKER_IMAGE
  override:
    - mvn test -Dsurefire.suiteXmlFiles=$(pwd)/$MAVEN_TEST_SUITE
  
